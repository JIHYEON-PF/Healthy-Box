<!DOCTYPE html>
<html lang="ko"  xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="description" content="">
    <meta name="author" content="JH">
    <title>Healthy Box</title>

    <!-- BootStrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <!-- jQuery -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>

    <link href="/css/colors.css" rel="stylesheet">
    <link href="/css/compProperties.css" rel="stylesheet">

</head>
<body>

    <header id="header">
        헤더 삽입부
        <hr>
    </header>

    <main class="container border-top">
        <div class="d-flex flex-wrap">
            <data-nav id="myPageNav">
                마이페이지 메뉴 부분
            </data-nav>
            <div class="col bg-light d-flex align-items-center justify-content-center">
                <div id="myPageDiv" class="container">
                    <div class="d-flex flex-wrap align-items-center justify-content-center border-top border-bottom">
                        <div class="d-flex flex-wrap mx-5">
                            <div class="mx-3">
                                <h5 class="defaultFontStyle">친구코드</h5>
                            </div>
                            <div class="mx-3">
                                <h5>ABC12345</h5>
                            </div>
                        </div>
                        <div id="pointDetail">
                            <div class="d-flex flex-wrap mx-5 my-2 col">
                                <div class="mx-3">
                                    <span class="defaultFontStyle">사용가능 포인트</span>
                                </div>
                                <div class="mx-3">
                                    <span id="allPoint">10,000</span>
                                </div>
                            </div>
                            <div class="d-flex flex-wrap mx-5 my-2 col">
                                <div class="mx-3">
                                    <span class="defaultFontStyle">소멸예정 포인트</span>
                                </div>
                                <div class="mx-3">
                                    <span id="expirePoint">100</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h4 class="defaultFontStyle my-4">사용내역 상세화면</h4>
                        <div>
                            <table id="pointDetailTable" class="table">
                                <thead>
                                    <tr class="text-center">
                                        <th>포인트 발생일자</th>
                                        <th>포인트 만료일자</th>
                                        <th>포인트 발생사유</th>
                                        <th>포인트 발생금액</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-center">친구추가</td>
                                        <td class="isExpired" hidden>Y</td>
                                        <td class="pointValue text-center">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>N</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>Y</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>N</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>Y</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>N</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                    <tr>
                                        <td class="occurDate text-center">2022-08-29</td>
                                        <td class="expireDate text-center">2022-09-12</td>
                                        <td class="pointContent text-start">친구추가</td>
                                        <td class="isExpired" hidden>Y</td>
                                        <td class="pointValue text-end">500</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer id="footer">
        <hr>
        푸터 삽입부
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

    <script src="/js/myPage.js"></script>

    <script>
        //포인트 발생금액 색상 조정
        $(document).ready(function () {
            let color = "black"; //기본 색상을 검정색으로 지정
            $('tbody').find('td').each(function (i, e) { //반복문 돌면서 클래스명 확인
                let className = ""; //클래스 명 조정
                // 클래스가 복수개 있는지 확인하고 제일 앞에 있는 클래스만 가져옴
                if (e.className.indexOf(" ") > 0 ) {
                    className = e.className.substring(0, e.className.indexOf(" "));
                } else {
                    className = e.className;
                }

                // 클래스 명 판단하여 색상 지정
                if (className === "isExpired") {
                    if ($(this).text() === "Y") {
                        color = "red";
                    } else {
                        color = "black";
                    }
                }

                // 색상을 지정해주고 지정된 색상에 따라 빨간색일 경우 앞에 문자열 '-' 추가해줌
                if (className === "pointValue") {
                    $(this).css("color", color);
                    if ($(this).css("color") === "rgb(255, 0, 0)") {
                        $(this).text("-"+$(this).text());
                    }
                }
            });
        });
    </script>

</body>
</html>
